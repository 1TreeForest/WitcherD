var ROW_BASE=1;var IsLoaded=false;var TABLE_NAME="tblPortForwarding";var TABLE_NAME2="tblPortForwarding2";var TABLE_NAME3="tblPortForwarding3";var STATUS="status_";var NAME="name_";var TCP_PORT="tcpport_";var UDP_PORT="udpport_";var LOCAL_IP="localip_";var SCHEDULE="schedule_";var EDIT_ICON="editicon_";var DELETE_ICON="delicon_";var a,b,c,d,e,f;var Name_CheckList=[];var tmp_Name;var tmp_LocalIP;var tmp_TCPPort;var tmp_UDPPort;var tmp_Schedule;var IsLoaded=true;function GetHNAPInformation(h,g,k,i,j,l){a=h;b=g;c=k;d=i;e=j;f=l}function myRowObject(k,j,m,n,g,i,l,h){this.one=k;this.two=j;this.three=m;this.four=n;this.five=g;this.six=i;this.seven=l;this.eight=h}function addRowToTable(l){if(IsLoaded){var h=document.getElementById(TABLE_NAME);var A=h.tBodies[0].rows.length;var g=A+ROW_BASE;if(l==null){l=A}else{g=l+ROW_BASE}var i=h.tBodies[0].insertRow(l);var z=i.insertCell(0);var v=document.createElement("input");v.setAttribute("type","checkbox");v.setAttribute("id",STATUS+g);switch(a){case"true":v.checked=true;break;case"false":v.checked=false;break;default:alert("Bad request!");break}z.appendChild(v);var y=i.insertCell(1);var t=document.createElement("label");t.setAttribute("id",NAME+g);t.setAttribute("size","10");t.innerHTML=b;y.appendChild(t);var x=i.insertCell(2);var r=document.createElement("label");r.setAttribute("id",LOCAL_IP+g);r.setAttribute("size","10");r.innerHTML=c;x.appendChild(r);var w=i.insertCell(3);var q=document.createElement("label");q.setAttribute("id",TCP_PORT+g);q.setAttribute("size","10");if(d!=""){q.innerHTML=d}else{q.innerHTML="N/A"}w.appendChild(q);var u=i.insertCell(4);var o=document.createElement("label");o.setAttribute("id",UDP_PORT+g);o.setAttribute("size","10");o.innerHTML=e;u.appendChild(o);if(e!=""){o.innerHTML=e}else{o.innerHTML="N/A"}var s=i.insertCell(5);var m=document.createElement("label");m.setAttribute("id",SCHEDULE+g);m.setAttribute("size","10");m.innerHTML=f;s.appendChild(m);var p=i.insertCell(6);var k=document.createElement("img");k.setAttribute("src","image/edit_btn.gif");k.setAttribute("width","28");k.setAttribute("height","28");k.setAttribute("id",EDIT_ICON+g);k.setAttribute("style","cursor:pointer");k.onclick=function(){editData(g)};p.appendChild(k);var n=i.insertCell(7);var j=document.createElement("img");j.setAttribute("src","image/trash.gif");j.setAttribute("width","41");j.setAttribute("height","41");j.setAttribute("id",DELETE_ICON+g);j.setAttribute("style","cursor:pointer");j.onclick=function(){deleteCurrentRow(this)};n.appendChild(j);i.myRow=new myRowObject(v,t,r,q,o,m,k,j);a=null;b=null;c=null;d=null;e=null;f=null}}function AddRowToIndex(){var m=document.getElementById(TABLE_NAME);tmp_Name=document.getElementById("pf_Name").value;for(var l=0;l<Name_CheckList.length;l++){Name_CheckList[l]=null}var k=0;for(var j=1;j<=Total_PortForwardingRules;j++){Name_CheckList[k]=m.rows[j].cells[1].childNodes[0].innerText;k++}for(var n=0;n<Name_CheckList.length;n++){if(tmp_Name==Name_CheckList[n]){alert("Name cannot be the same.");return"Error"}}var g=document.getElementById("pf_Schedule");a="true";b=document.getElementById("pf_Name").value;c=document.getElementById("pf_LocalIP").value;var i=document.getElementById("pf_TCPPort").value;var h=document.getElementById("pf_UDPPort").value;d=i.replace(/\s/g,"");e=h.replace(/\s/g,"");f=g.options[g.selectedIndex].text;addRowToTable(null);Total_PortForwardingRules+=1;check_TotalRule(Limit_TotalPortForwardingRules,Total_PortForwardingRules);return"Success"}function editDataGet(g){var j=document.getElementById(TABLE_NAME);var p=j.rows[g].childNodes[1].childNodes[0].innerHTML;var o=j.rows[g].childNodes[2].childNodes[0].innerHTML;var l=j.rows[g].childNodes[3].childNodes[0].innerHTML;var k=j.rows[g].childNodes[4].childNodes[0].innerHTML;var m=j.rows[g].childNodes[5].childNodes[0].innerHTML;document.getElementById("edit_pf_Name").value=p;document.getElementById("pf_EditLocalIP").value=o;if(l=="N/A"){document.getElementById("pf_EditTCPPort").value=""}else{document.getElementById("pf_EditTCPPort").value=l}if(k=="N/A"){document.getElementById("pf_EditUDPPort").value=""}else{document.getElementById("pf_EditUDPPort").value=k}var n=document.getElementById("pf_EditSchedule");for(var h=0;h<=Total_ScheduleRules;h++){if(n.options[h].text===m){$("#pf_EditSchedule").selectbox("detach");$("#pf_EditSchedule").val(h);$("#pf_EditSchedule").selectbox("attach");break}}tmp_Name=p;tmp_LocalIP=o;tmp_TCPPort=l;tmp_UDPPort=k;tmp_Schedule=m;setIteration(g)}function assignRowToIndex(i){var l=document.getElementById(TABLE_NAME);var q=document.getElementById("edit_pf_Name").value;if(q!=""){for(var o=0;o<Name_CheckList.length;o++){Name_CheckList[o]=null}var j=0;for(var k=1;k<=Total_PortForwardingRules;k++){if(i==k){Name_CheckList[j]=q}else{Name_CheckList[j]=l.rows[k].cells[1].childNodes[0].innerText}j++}for(var n=0;n<Name_CheckList.length;n++){if(q==Name_CheckList[n]){if(n==i-1){continue}else{alert("Name cannot be the same.");return"Error"}}}l.rows[i].childNodes[0].childNodes[0].innerHTML=document.getElementById("edit_pf_Name").value}var t=document.getElementById("edit_pf_Name").value;var s=document.getElementById("pf_EditLocalIP").value;var u=document.getElementById("pf_EditTCPPort").value;var p=document.getElementById("pf_EditUDPPort").value;var g=u.replace(/\s/g,"");var r=p.replace(/\s/g,"");var m=document.getElementById("pf_EditSchedule");var h=m.options[m.selectedIndex].text;l.rows[i].childNodes[1].childNodes[0].innerHTML=t;l.rows[i].childNodes[2].childNodes[0].innerHTML=s;l.rows[i].childNodes[5].childNodes[0].innerHTML=h;if(u==""){l.rows[i].childNodes[3].childNodes[0].innerHTML="N/A"}else{l.rows[i].childNodes[3].childNodes[0].innerHTML=g}if(p==""){l.rows[i].childNodes[4].childNodes[0].innerHTML="N/A"}else{l.rows[i].childNodes[4].childNodes[0].innerHTML=r}check_TotalRule(Limit_TotalPortForwardingRules,Total_PortForwardingRules);return"Success"}function deleteCurrentRow(k){if(IsLoaded){var g=k.parentNode.parentNode;var j=g.parentNode.parentNode;var i=g.sectionRowIndex;var h=new Array(g);deleteRows(h);reorderRows(j,i);Total_PortForwardingRules-=1;check_TotalRule(Limit_TotalPortForwardingRules,Total_PortForwardingRules);save_button_changed()}}function OnChangeName(g){tmp_Name=g}function OnChangeTCPPort(g){tmp_TCPPort=g}function OnChangeUDPPort(g){tmp_UDPPort=g}function OnChangeLocalIP(g){tmp_LocalIP=g}function deleteRows(j){if(IsLoaded){for(var g=0;g<j.length;g++){var h=j[g].sectionRowIndex;j[g].parentNode.deleteRow(h)}}}function changeRowIndex(g){var h=document.getElementById(TABLE_NAME);h.rows[g].childNodes[6].childNodes[0].onclick=function(){editData(g)}}function reorderRows(k,j){var k=document.getElementById(TABLE_NAME);if(IsLoaded){if(k.tBodies[0].rows[j]){var h=j+ROW_BASE;for(var g=j;g<k.tBodies[0].rows.length;g++){k.tBodies[0].rows[g].myRow.one.id=STATUS+h;k.tBodies[0].rows[g].myRow.two.id=NAME+h;k.tBodies[0].rows[g].myRow.three.id=LOCAL_IP+h;k.tBodies[0].rows[g].myRow.four.id=TCP_PORT+h;k.tBodies[0].rows[g].myRow.five.id=UDP_PORT+h;k.tBodies[0].rows[g].myRow.six.id=SCHEDULE+h;changeRowIndex(h);h++}}}}function check_TotalRule(h,i){var g=h-i;document.getElementById("RemainingRules").innerHTML=g;if(g==0){document.getElementById("createButton").disabled=true}else{document.getElementById("createButton").disabled=false}};