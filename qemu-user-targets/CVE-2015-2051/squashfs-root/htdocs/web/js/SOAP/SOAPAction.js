var SOAP_NAMESPACE="http://purenetworks.com/HNAP1/";function SOAPAction(){}SOAPAction.prototype={timeout:0};SOAPAction.prototype.createValueBody=function(c){var a="";for(var d in c){if((d.charAt(0)=="_")||(d=="push")){continue}if($.isArray(c[d])==true){for(var b in c[d]){a+="<"+d+">";a+=this.createValueBody(c[d][b]);a+="</"+d+">"}}else{if((typeof d!="string")||(d.length>0)){a+="<"+d+">";if(($.type(c[d])=="object")&&(c[d]!=null)){a+=this.createValueBody(c[d])}else{a+=c[d]}a+="</"+d+">"}else{a+="<"+d+"/>"}}}return a};SOAPAction.prototype.createActionBody=function(b,c){var a='<?xml version="1.0" encoding="utf-8"?>';a+='<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">';a+="<soap:Body>";if((typeof c=="object")&&(c!=null)){a+="<"+b+' xmlns="'+SOAP_NAMESPACE+'">';a+=this.createValueBody(c);a+="</"+b+">"}else{a+="<"+b+' xmlns="'+SOAP_NAMESPACE+'" />'}a+="</soap:Body></soap:Envelope>";return a};SOAPAction.prototype.sendSOAPAction=function(d,h,a){var i=$.Deferred();var j=this;j.output=a;var e=j.createActionBody(d,h);var g='"'+SOAP_NAMESPACE+d+'"';var f=localStorage.getItem("PrivateKey");if(f==null){f="withoutloginkey"}var c=new Date().getTime();c=Math.floor(c/1000)%2000000000;c=c.toString();var b=hex_hmac_md5(f,c+g);b=b.toUpperCase()+" "+c;$.ajax({url:"/HNAP1/",type:"POST",contentType:"text/xml; charset=utf-8",headers:{SOAPAction:g,HNAP_AUTH:b},timeout:j.timeout,data:e,success:function(m){var l=j.output;var k=$(m).find(d+"Result").text().toUpperCase();if(k=="ERROR"){return i.reject()}if(l!=null){function n(p,q){var s=p;if(Object.keys(s).length==0){var o=q.children().end();s=o.text();return s}for(var t in s){if($.isArray(s[t])==true){if(q.find(t).length==0){s[t].splice(0,1)}else{var r=true;q.find(t).each(function(){var u=$(this);var v={};if(s[t][0]==null){r=false}$.extend(true,v,s[t][0]);v=n(v,u);if(r==true){s[t].splice(0,1);r=false}s[t].push(v)})}}else{q.children().each(function(){var u=$(this);var v=u[0].tagName.toLowerCase();if(v==t.toLowerCase()){if($.type(s[t])=="object"){if($.isArray(s[t])==true){return true}s[t]=n(s[t],u);return false}else{s[t]=u.text();return false}}})}}return s}l=n(l,$(m).find(d+"Response"))}else{l=new Object()}l[d+"Result"]=k;i.resolve(l)},error:function(m,k,l){i.reject()}});return i.promise()};SOAPAction.prototype.copyObject=function(c,d){for(var a in c){for(var b in d){if(a==b){if($.type(c[a])=="object"){if($.isArray(c[a])==true){}this.copyObject(c[a],d[b])}else{c[a]=d[b];break}}}}};