function doLogin(c,b){var g=null;var a=$.Deferred();var e=new SOAPAction();var d=new SOAPLogin();var f=new SOAPLoginResponse();d.Action="request";d.Username="Admin";d.Captcha=b;e.sendSOAPAction("Login",d,f).done(function(i){if(i.Challenge!=null||i.Cookie!=null||i.PublicKey!=null){g=hex_hmac_md5(i.PublicKey+c,i.Challenge);g=g.toUpperCase();$.cookie("uid",i.Cookie,{expires:1,path:"/"});localStorage.setItem("PrivateKey",g);var j=hex_hmac_md5(g,i.Challenge);j=j.toUpperCase();d.Action="login";d.LoginPassword=j;d.Captcha=b;var h=new SOAPAction();h.sendSOAPAction("Login",d,null).done(function(k){if(k.LoginResult=="FAILED"){a.reject()}else{a.resolve()}}).fail(function(){a.reject()})}else{a.reject()}}).fail(function(){a.reject()});return a.promise()};