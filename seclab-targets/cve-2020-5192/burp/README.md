
# to bring up container 
From a directory setup of `cve-2020-5192/burp`

This command brings up container and starts coverage tracking, putting the results in the subdirectory `coverages`

It also cleans up a prior run

```
cve=$(basename $(dirname $(pwd)));plus=$(basename $(pwd)); docker kill $cve-$plus; sleep 1; docker run -id --rm --name $cve-$plus -v $(pwd):$(pwd) -v $(pwd)/coverages:/tmp/coverages puppeteer1337/$cve && docker exec -it -w $(pwd) $cve-$plus bash -c "find coverages -name '*.cc.json' -delete;touch /tmp/start_test.dat; echo \$(ifconfig|egrep -oh 'inet 172[\.0-9]+')" && echo "Up and running"

```

Start up burp and add credentials from google doc

# Witcher request data

To add the Witcher request data to Burp, start burp and then run the request_data.json files through the python app burp-buff.py

```
cd Witcher/seclab-targets/cve-2020-5192
python ../burp-buff.py admin/request_data.json --target-ip (the ip of the container running the app)
python ../burp-buff.py doctor/request_data.json --target-ip (the ip of the container running the app)
python ../burp-buff.py user/request_data.json --target-ip (the ip of the container running the app)

```

# Calculating the results

To calc the results after Burp is complete, you can use jq and awk.  

```
jq 'del(."/enable_cc.php")|to_entries[]|(.value)|to_entries[]|(.value)' burp/coverages/* | awk '{if ($1 == 1) {fcnt++;} else {mcnt++;}; tcnt++} END{printf "covered=%d missed=%d total=%d", fcnt, mcnt, tcnt}'
```


